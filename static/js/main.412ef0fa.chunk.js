(this.webpackJsonpcare=this.webpackJsonpcare||[]).push([[0],{115:function(e,t,n){},178:function(e,t,n){},193:function(e,t){},195:function(e,t){},205:function(e,t){},207:function(e,t){},234:function(e,t){},235:function(e,t){},240:function(e,t){},242:function(e,t){},249:function(e,t){},268:function(e,t){},309:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(65),c=n.n(s),o=(n(178),n(6)),i=n.n(o),l=n(13),d=n(22),u=(n(115),n(73)),b=n(72),p=n(2),j=function(){return Object(a.useEffect)((function(){var e=sessionStorage.getItem("savedEmail");e?(console.log("savedmail is "+e),document.getElementsByClassName("Navbartop")[0].style.display="block"):document.getElementsByClassName("Navbartop")[0].style.display="none"})),Object(p.jsx)("div",{className:"Navbartop",children:Object(p.jsxs)(u.a,{bg:"dark",expand:"lg",variant:"dark",children:[Object(p.jsx)(u.a.Brand,{href:"#home",children:"Care"}),Object(p.jsx)(u.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(p.jsx)(u.a.Collapse,{id:"basic-navbar-nav",children:Object(p.jsxs)(b.a,{className:"mr-auto",children:[Object(p.jsx)(b.a.Link,{href:"#home",children:"Home"}),Object(p.jsx)(b.a.Link,{href:"#donate-food",children:"Donate Food"}),Object(p.jsx)(b.a.Link,{href:"#my-cart",children:"My Cart"})]})})]})})},m=n(18),h=n(171),f=n(172),y=n(19),g=(n(310),n(184),n(186),n(7)),x=n.n(g),O={apiKey:"AIzaSyAHN7qi76sqh-ZHSlAGryJEbTvxcsvFJaY",authDomain:"user-database-test-9ee1d.firebaseapp.com",databaseURL:"https://user-database-test-9ee1d.firebaseio.com",projectId:"user-database-test-9ee1d",storageBucket:"user-database-test-9ee1d.appspot.com",messagingSenderId:"425239506606",appId:"1:425239506606:web:decf3cc0780d2d8e9d073f"},v=new(function(){function e(){Object(h.a)(this,e),y.a.initializeApp(O),this.auth=y.a.auth(),this.db=y.a.firestore,this.u_id=0,this.currentUserID=0,this.currentUsername=""}return Object(f.a)(e,[{key:"createOrder",value:function(){var e=Object(l.a)(i.a.mark((function e(t,n,a,r){var s,c,o,l,d,u,b,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.database().ref("care_orders").once("value");case 2:for(s=e.sent,c=!1,o="";!1===c;){for(c=!0,l=[],u=(d="ABCDEFGHJKLMNPQRSTUVWXYZ23456789").length,b=0;b<7;b++)l.push(d.charAt(Math.floor(Math.random()*u)));for(p in o=l.join(""),s.val())s.val()[p].receipt&&o===x.a.AES.decrypt(s.val()[p].receipt,"receiptEncrypted").toString(x.a.enc.Utf8)&&(c=!1)}return e.next=8,y.a.database().ref("care_orders").push({user:x.a.AES.encrypt(t,"emailEncrypted").toString(),items:x.a.AES.encrypt(n,"mycartEncrypted").toString(),receipt:x.a.AES.encrypt(o,"receiptEncrypted").toString(),total:x.a.AES.encrypt(a.toString(),"totalEncrypted").toString(),details:x.a.AES.encrypt(r,"detailsEncrypted").toString(),confirmed:0});case 8:return console.log("order has been added to database"),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"getUserDetails",value:function(){var e=Object(l.a)(i.a.mark((function e(t){var n,a,r,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,y.a.database().ref("care_users").once("value");case 3:a=e.sent,e.t0=i.a.keys(a.val());case 5:if((e.t1=e.t0()).done){e.next=14;break}if(r=e.t1.value,x.a.AES.decrypt(a.val()[r].email,"emailEncrypted").toString(x.a.enc.Utf8)!==t){e.next=12;break}return s=x.a.AES.decrypt(a.val()[r].firstName,"firstNameEncrypted").toString(x.a.enc.Utf8),c=x.a.AES.decrypt(a.val()[r].lastName,"lastNameEncrypted").toString(x.a.enc.Utf8),n=s+" "+c,e.abrupt("return",n);case 12:e.next=5;break;case 14:return e.abrupt("return",0);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getOrderById",value:function(){var e=Object(l.a)(i.a.mark((function e(t){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,y.a.database().ref("care_orders").once("value");case 3:a=e.sent,e.t0=i.a.keys(a.val());case 5:if((e.t1=e.t0()).done){e.next=12;break}if(r=e.t1.value,x.a.AES.decrypt(a.val()[r].receipt,"receiptEncrypted").toString(x.a.enc.Utf8)!==t){e.next=10;break}return n={user:x.a.AES.decrypt(a.val()[r].user,"emailEncrypted").toString(x.a.enc.Utf8),items:x.a.AES.decrypt(a.val()[r].items,"mycartEncrypted").toString(x.a.enc.Utf8),total:x.a.AES.decrypt(a.val()[r].total,"totalEncrypted").toString(x.a.enc.Utf8),details:x.a.AES.decrypt(a.val()[r].details,"detailsEncrypted").toString(x.a.enc.Utf8),confirmed:a.val()[r].confirmed},e.abrupt("return",n);case 10:e.next=5;break;case 12:return e.abrupt("return",0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPendingOrders",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,y.a.database().ref("care_orders").once("value");case 3:for(a in(n=e.sent).val())n.val()[a].details&&0===n.val()[a].confirmed&&(r={user:x.a.AES.decrypt(n.val()[a].user,"emailEncrypted").toString(x.a.enc.Utf8),items:x.a.AES.decrypt(n.val()[a].items,"mycartEncrypted").toString(x.a.enc.Utf8),total:x.a.AES.decrypt(n.val()[a].total,"totalEncrypted").toString(x.a.enc.Utf8),details:x.a.AES.decrypt(n.val()[a].details,"detailsEncrypted").toString(x.a.enc.Utf8),receipt:x.a.AES.decrypt(n.val()[a].receipt,"receiptEncrypted").toString(x.a.enc.Utf8)},t.push(r));return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getConfirmedOrders",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,y.a.database().ref("care_orders").once("value");case 3:for(a in(n=e.sent).val())n.val()[a].details&&1===n.val()[a].confirmed&&(r={user:x.a.AES.decrypt(n.val()[a].user,"emailEncrypted").toString(x.a.enc.Utf8),items:x.a.AES.decrypt(n.val()[a].items,"mycartEncrypted").toString(x.a.enc.Utf8),total:x.a.AES.decrypt(n.val()[a].total,"totalEncrypted").toString(x.a.enc.Utf8),details:x.a.AES.decrypt(n.val()[a].details,"detailsEncrypted").toString(x.a.enc.Utf8),receipt:x.a.AES.decrypt(n.val()[a].receipt,"receiptEncrypted").toString(x.a.enc.Utf8)},t.push(r));return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"writeToken",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,a,r,s,c,o,l,d,u,b,p,j;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("writing token..."),e.next=3,y.a.database().ref("care_tokens").once("value");case 3:for(t=e.sent,n=!1,a="";!1===n;){for(n=!0,r=[],c=(s="ABCDEFGHJKLMNPQRSTUVWXYZ23456789").length,o=0;o<10;o++)r.push(s.charAt(Math.floor(Math.random()*c)));for(l in a=r.join(""),t.val())t.val()[l].code&&a===x.a.AES.decrypt(t.val()[l].code,"tokenEncrypted").toString(x.a.enc.Utf8)&&(n=!1)}return(d=new Date).setDate(d.getDate()+3),(u=d.getUTCDate())<10&&(u="0"+u.toString()),(b=d.getUTCMonth())<10&&(b="0"+b.toString()),p=d.getUTCFullYear(),j=parseInt(p.toString()+b+u),e.next=17,y.a.database().ref("care_tokens").push({code:x.a.AES.encrypt(a,"tokenEncrypted").toString(),exp_date:j.toString(),is_valid:1});case 17:return console.log("token:"+a),console.log("date:"+j),console.log("written token"),e.abrupt("return",a);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getTokens",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getting tokens..."),e.next=3,y.a.database().ref("care_tokens").once("value");case 3:for(r in t=e.sent,n=[],t.val())t.val()[r].code&&(a={code:x.a.AES.decrypt(t.val()[r].code,"tokenEncrypted").toString(x.a.enc.Utf8),exp_date:t.val()[r].exp_date,is_valid:t.val()[r].is_valid},n.push(a));return console.log("returning tokens"),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"validateOrder",value:function(){var e=Object(l.a)(i.a.mark((function e(t){var n,a,r,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("validating order..."),e.next=3,y.a.database().ref("care_orders").once("value");case 3:for(s in n=e.sent,r=a=0,n.val())x.a.AES.decrypt(n.val()[s].receipt,"receiptEncrypted").toString(x.a.enc.Utf8)===t?r=a:a+=1;return c=Object.keys(n.val())[r],e.next=10,y.a.database().ref("care_orders/"+c).child("confirmed").set(1);case 10:console.log("validated order");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"resetToken",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,a,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("resetting tokens..."),e.next=3,y.a.database().ref("care_tokens").once("value");case 3:for(r in t=e.sent,a=n=0,t.val())"POIJKLMNB"===t.val()[r].code?a=n:n+=1;return s=Object.keys(t.val())[a],e.next=10,y.a.database().ref("care_tokens/"+s).child("is_valid").set(1);case 10:console.log("reset token");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"creatingUser",value:function(){var e=Object(l.a)(i.a.mark((function e(t,n,a,r,s,c,o){var l,d,u,b,p,j,m,h,f,g,O,v,k,E;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("adding user to database..."),e.next=3,y.a.database().ref("care_users").once("value");case 3:for(b in l=e.sent,d=x.a.AES.encrypt(t,"emailEncrypted").toString(),u=!0,l.val())l.val()[b].email&&t===x.a.AES.decrypt(l.val()[b].email,"emailEncrypted").toString(x.a.enc.Utf8)&&(console.log("error: that user already exists"),u=!1);if(!u){e.next=28;break}return p=x.a.AES.encrypt(n,"passwordEncrypted").toString(),j=x.a.AES.encrypt(a,"firstNameEncrypted").toString(),m=x.a.AES.encrypt(r,"lastNameEncrypted").toString(),h=x.a.AES.encrypt(s,"addressEncrypted").toString(),f=x.a.AES.encrypt(c,"phoneEncrypted").toString(),console.log(d),console.log(x.a.AES.decrypt(d,"emailEncrypted").toString()),console.log(x.a.AES.decrypt(d,"emailEncrypted").toString(x.a.enc.Utf8)),e.next=18,y.a.database().ref("care_users").push({email:d,password:p,firstName:j,lastName:m,address:h,phone:f});case 18:return console.log("user added"),e.next=21,y.a.database().ref("care_tokens").once("value");case 21:for(k in g=e.sent,v=O=0,g.val())g.val()[k].code&&(o===x.a.AES.decrypt(g.val()[k].code,"tokenEncrypted").toString(x.a.enc.Utf8)?v=O:O+=1);return E=Object.keys(g.val())[v],e.next=28,y.a.database().ref("care_tokens/"+E).child("is_valid").set(0);case 28:return e.abrupt("return",u);case 29:case"end":return e.stop()}}),e)})));return function(t,n,a,r,s,c,o){return e.apply(this,arguments)}}()},{key:"loginUser",value:function(){var e=Object(l.a)(i.a.mark((function e(t,n){var a,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("adding user to database..."),e.next=3,y.a.database().ref("care_users").once("value");case 3:for(s in a=e.sent,r=!1,a.val())a.val()[s].email&&t===x.a.AES.decrypt(a.val()[s].email,"emailEncrypted").toString(x.a.enc.Utf8)&&n===x.a.AES.decrypt(a.val()[s].password,"passwordEncrypted").toString(x.a.enc.Utf8)&&(r=!0);return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getFood",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getting food..."),e.next=3,y.a.database().ref("care_food").once("value");case 3:for(a in t=e.sent,n=[],t.val())t.val()[a].description&&(r={desc:t.val()[a].description,src:t.val()[a].imageSrc,price:t.val()[a].price},n.push(r));return console.log("returning food "+n.length),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"addItem",value:function(){var e=Object(l.a)(i.a.mark((function e(t,n,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("adding "+t+"..."),e.next=3,y.a.database().ref("care_food").push({description:t,imageSrc:n,price:a});case 3:console.log(t+"added");case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"removeItem",value:function(){var e=Object(l.a)(i.a.mark((function e(t){var n,a,r,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("removing "+t+"..."),e.next=3,y.a.database().ref("care_food").once("value");case 3:for(s in n=e.sent,r=a=0,n.val())t===n.val()[s].description?r=a:a+=1;return c=Object.keys(n.val())[r],console.log(c),e.next=11,y.a.database().ref("care_food/"+c).remove();case 11:console.log(t+"removed");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),k=n(8),E=n(20),S=n(114),C=n(47),N=function(){var e=Object(a.useState)(0),t=Object(m.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),c=Object(m.a)(s,2),o=c[0],u=c[1],b=Object(a.useState)(""),j=Object(m.a)(b,2),h=j[0],f=j[1],y=Object(a.useState)(""),g=Object(m.a)(y,2),x=g[0],O=g[1],N=Object(a.useState)(""),w=Object(m.a)(N,2),B=w[0],I=w[1],A=Object(a.useState)(""),T=Object(m.a)(A,2),D=T[0],L=T[1],F=Object(a.useState)(""),U=Object(m.a)(F,2),P=U[0],M=U[1],_=Object(a.useState)(""),q=Object(m.a)(_,2),H=q[0],G=q[1],R=Object(d.f)();function Y(){return(Y=Object(l.a)(i.a.mark((function e(){var t,n,a,s,c,o,l,d,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r(1),document.getElementsByClassName("spinner")[0].style.display="block",document.getElementsByClassName("spinner")[0].style.display="none",t=sessionStorage.getItem("token"),n=!1,!t){e.next=11;break}return e.next=8,v.getTokens();case 8:if(a=e.sent,console.log("over here"),a)for(s=0;s<a.length;s++)a[s].code===t?1===a[s].is_valid?(c=new Date,(o=c.getUTCDate())<10&&(o="0"+o.toString()),(l=c.getUTCMonth())<10&&(l="0"+l.toString()),d=c.getUTCFullYear(),u=parseInt(d.toString()+l+o),a[s].exp_date>=u?(n=!0,console.log("valid token")):console.log("that token is expired")):console.log("that token has already been used"):console.log("no matches");else console.log("there are no valid tokens at all");case 11:n?document.getElementsByClassName("LoginFormValidated")[0].style.display="block":document.getElementsByClassName("LoginFormInvalidated")[0].style.display="block";case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("loggin in user"),console.log(o),e.next=5,v.loginUser(o,h);case 5:e.sent?(sessionStorage.setItem("savedEmail",o),R.push("/home")):console.log("invalid credentials");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.getElementsByClassName("userAlert")[0].style.display="none",t.preventDefault(),h===x){e.next=7;break}console.log("passwords no match"),$(),e.next=13;break;case 7:return console.log("passwords match"),n=sessionStorage.getItem("token"),e.next=11,v.creatingUser(o,h,B,D,H,P,n);case 11:e.sent?(sessionStorage.setItem("savedEmail",o),R.push("/home")):Q();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){"block"===document.getElementsByClassName("passwordsAlert")[0].style.display?document.getElementsByClassName("passwordsAlert")[0].style.display="none":document.getElementsByClassName("passwordsAlert")[0].style.display="block"}function Q(){"block"===document.getElementsByClassName("userAlert")[0].style.display?document.getElementsByClassName("userAlert")[0].style.display="none":document.getElementsByClassName("userAlert")[0].style.display="block"}return Object(a.useEffect)((function(){0===n&&(!function(){Y.apply(this,arguments)}(),sessionStorage.getItem("savedEmail")&&(console.log("you are already logged in, going home"),R.push("/home")))})),Object(p.jsxs)("div",{className:"LoginForm",children:[Object(p.jsx)(C.a,{animation:"border",className:"spinner"}),Object(p.jsx)("div",{className:"LoginFormInvalidated",style:{display:"none"},children:Object(p.jsxs)(k.a,{onSubmit:function(e){return K.apply(this,arguments)},children:[Object(p.jsxs)(k.a.Group,{controlId:"formBasicEmailLogin",children:[Object(p.jsx)(k.a.Label,{children:"Email address"}),Object(p.jsx)(k.a.Control,{required:!0,value:o,onChange:function(e){return u(e.target.value)},type:"email",placeholder:"Enter email"})]}),Object(p.jsxs)(k.a.Group,{controlId:"formBasicPasswordLogin",children:[Object(p.jsx)(k.a.Label,{children:"Password"}),Object(p.jsx)(k.a.Control,{required:!0,value:h,onChange:function(e){return f(e.target.value)},name:"password",type:"password",placeholder:"Password"})]}),Object(p.jsx)(E.a,{variant:"primary",type:"submit",children:"Submit"})]})}),Object(p.jsx)("div",{className:"LoginFormValidated",style:{display:"none"},children:Object(p.jsxs)(k.a,{onSubmit:function(e){return J.apply(this,arguments)},children:[Object(p.jsxs)(k.a.Group,{controlId:"formBasicFirstName",children:[Object(p.jsx)(k.a.Label,{children:"First Name"}),Object(p.jsx)(k.a.Control,{required:!0,value:B,onChange:function(e){return I(e.target.value)},type:"text",placeholder:"Enter first name"})]}),Object(p.jsxs)(k.a.Group,{controlId:"formBasicLastName",children:[Object(p.jsx)(k.a.Label,{children:"Last Name"}),Object(p.jsx)(k.a.Control,{required:!0,value:D,onChange:function(e){return L(e.target.value)},type:"text",placeholder:"Enter last name"})]}),Object(p.jsxs)(k.a.Group,{controlId:"formBasicEmail",children:[Object(p.jsx)(k.a.Label,{children:"Email address"}),Object(p.jsx)(k.a.Control,{required:!0,value:o,onChange:function(e){return u(e.target.value)},type:"email",placeholder:"Enter email"})]}),Object(p.jsx)("div",{className:"userAlert",style:{display:"none"},children:Object(p.jsx)(S.a,{variant:"danger",onClose:function(){return Q()},dismissible:!0,children:Object(p.jsx)("p",{children:"Error: that email is already taken"})})}),Object(p.jsxs)(k.a.Group,{controlId:"formBasicPhone",children:[Object(p.jsx)(k.a.Label,{children:"Phone Number"}),Object(p.jsx)(k.a.Control,{required:!0,value:P,onChange:function(e){return M(e.target.value)},type:"text",placeholder:"Enter Phone Number"})]}),Object(p.jsxs)(k.a.Group,{controlId:"formBasicAddress",children:[Object(p.jsx)(k.a.Label,{children:"Address"}),Object(p.jsx)(k.a.Control,{required:!0,value:H,onChange:function(e){return G(e.target.value)},type:"text",placeholder:"Enter Address"})]}),Object(p.jsxs)(k.a.Group,{controlId:"formBasicPassword",children:[Object(p.jsx)(k.a.Label,{children:"Password"}),Object(p.jsx)(k.a.Control,{required:!0,value:h,onChange:function(e){return f(e.target.value)},name:"password",type:"password",placeholder:"Password"})]}),Object(p.jsxs)(k.a.Group,{controlId:"formBasicPassword2",children:[Object(p.jsx)(k.a.Label,{children:"Password Confirm"}),Object(p.jsx)(k.a.Control,{required:!0,value:x,onChange:function(e){return O(e.target.value)},name:"password2",type:"password",placeholder:"Password Confirm"})]}),Object(p.jsx)("div",{className:"passwordsAlert",style:{display:"none"},children:Object(p.jsx)(S.a,{variant:"danger",onClose:function(){return $()},dismissible:!0,children:Object(p.jsx)("p",{children:"Error: passwords do not match"})})}),Object(p.jsx)(E.a,{variant:"primary",type:"submit",children:"Submit"})]})})]})},w=n(49),B=n.p+"static/media/field1.501b3c72.jpg",I=n.p+"static/media/field2.001013cd.jpg",A=n.p+"static/media/field3.48ea8872.jpg",T=n.p+"static/media/field4.7d0b956d.jpg",D=n(17),L=n.p+"static/media/foodDonate.606d6faf.jpg",F=n.p+"static/media/clothesDonate.defeb0b1.jpg",U=n.p+"static/media/moneyDonate.7cc31a1b.jpg",P=function(){var e=Object(d.f)();return Object(a.useEffect)((function(){var t=sessionStorage.getItem("savedEmail");t?(console.log("savedmail is "+t),function(){for(var e=document.getElementsByClassName("chapter"),t=0;t<e.length;t++)t%2!==0&&(e[t].style.backgroundColor="#DADADA");document.getElementsByClassName("Navbartop")[0].style.display="block",document.getElementsByClassName("Footerbottom")[0].style.display="block"}()):e.push("/")})),Object(p.jsxs)("div",{className:"Home",children:[Object(p.jsxs)("div",{className:"HomeContent",children:[Object(p.jsx)("br",{}),Object(p.jsx)("div",{className:"chapter",children:Object(p.jsx)("div",{className:"carouselSlides",children:Object(p.jsxs)(w.a,{children:[Object(p.jsxs)(w.a.Item,{interval:3e3,children:[Object(p.jsx)("img",{className:"d-block w-100",src:B,alt:"First slide"}),Object(p.jsxs)(w.a.Caption,{children:[Object(p.jsx)("h3",{children:"First slide label"}),Object(p.jsx)("p",{children:"Nulla vitae elit libero, a pharetra augue mollis interdum."})]})]}),Object(p.jsxs)(w.a.Item,{interval:3e3,children:[Object(p.jsx)("img",{className:"d-block w-100",src:I,alt:"Second slide"}),Object(p.jsxs)(w.a.Caption,{children:[Object(p.jsx)("h3",{children:"Second slide label"}),Object(p.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit."})]})]}),Object(p.jsxs)(w.a.Item,{interval:3e3,children:[Object(p.jsx)("img",{className:"d-block w-100",src:A,alt:"Third slide"}),Object(p.jsxs)(w.a.Caption,{children:[Object(p.jsx)("h3",{children:"Third slide label"}),Object(p.jsx)("p",{children:"Praesent commodo cursus magna, vel scelerisque nisl consectetur."})]})]})]})})}),Object(p.jsx)("br",{}),Object(p.jsx)("div",{className:"chapter",children:Object(p.jsx)("table",{className:"homeTable",children:Object(p.jsx)("tbody",{children:Object(p.jsxs)("tr",{children:[Object(p.jsxs)("td",{children:[Object(p.jsx)("p",{children:"With your donations, food and supplies can be delivered to the poor faimlies in Lebanon."}),Object(p.jsx)(E.a,{variant:"success",children:"Sponsor a family"})]}),Object(p.jsx)("td",{children:Object(p.jsx)("img",{src:T,alt:"imagePic"})})]})})})}),Object(p.jsx)("br",{}),Object(p.jsx)("br",{}),Object(p.jsx)("div",{className:"chapter",children:Object(p.jsxs)("div",{id:"donation",children:[Object(p.jsx)("h3",{children:"Make a donation"}),Object(p.jsx)("br",{}),Object(p.jsx)("table",{className:"donationTable",children:Object(p.jsx)("tbody",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:Object(p.jsxs)(D.a,{children:[Object(p.jsx)(D.a.Img,{variant:"top",src:L}),Object(p.jsxs)(D.a.Body,{children:[Object(p.jsx)(D.a.Title,{children:"Food"}),Object(p.jsx)(D.a.Text,{children:"Donate much needed food to families."}),Object(p.jsx)(E.a,{variant:"primary",onClick:function(){e.push("/donate-food")},children:"Donate food"})]})]})}),Object(p.jsx)("td",{children:Object(p.jsxs)(D.a,{children:[Object(p.jsx)(D.a.Img,{variant:"top",src:F}),Object(p.jsxs)(D.a.Body,{children:[Object(p.jsx)(D.a.Title,{children:"Clothes and other items"}),Object(p.jsx)(D.a.Text,{children:"Donate clothes to old and yound as well as other items."}),Object(p.jsx)(E.a,{variant:"primary",children:"Donate items"})]})]})}),Object(p.jsx)("td",{children:Object(p.jsxs)(D.a,{children:[Object(p.jsx)(D.a.Img,{variant:"top",src:U}),Object(p.jsxs)(D.a.Body,{children:[Object(p.jsx)(D.a.Title,{children:"Make a donation"}),Object(p.jsx)(D.a.Text,{children:"Make a cash or bank donation to a family."}),Object(p.jsx)(E.a,{variant:"primary",onClick:function(){e.push("/donate-money")},children:"Donate Money"})]})]})})]})})})]})})]}),Object(p.jsx)("br",{})]})},M=function(){var e=Object(d.f)();return Object(a.useEffect)((function(){!function(){var e=window.location.href;console.log("url:"+e);var t="";e.includes("token=")&&e.includes("#")?(t=e.split("token=")[1].split("#")[0],console.log("token is "+t),sessionStorage.setItem("token",t)):(console.log("invalid url"),console.log("mayb check if user has login access?"))}(),e.push("/")})),Object(p.jsx)("div",{className:"ErrorPage"})},_=n(38),q=function(){var e=Object(a.useState)(""),t=Object(m.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),c=Object(m.a)(s,2),o=c[0],i=c[1],l=Object(d.f)();return Object(a.useEffect)((function(){var e=sessionStorage.getItem("savedEmail");e?(console.log("savedmail is "+e),function(e){document.getElementById("referenceID")&&(document.getElementById("referenceID").innerHTML=e||"<i>Your email address</i>")}(e)):l.push("/")})),Object(p.jsxs)("div",{className:"DonateMoney",children:[Object(p.jsxs)("div",{className:"content",children:[Object(p.jsx)("br",{}),Object(p.jsx)("h3",{children:"Donate Money"}),Object(p.jsx)("br",{}),Object(p.jsx)("p",{children:"Thank you for your generosity. Please fill in the form to make a donation:"}),Object(p.jsx)("br",{}),Object(p.jsx)("div",{className:"paymentSection",children:Object(p.jsxs)(_.a,{defaultActiveKey:"0",children:[Object(p.jsxs)(D.a,{children:[Object(p.jsx)(D.a.Header,{children:Object(p.jsx)(_.a.Toggle,{as:E.a,variant:"link",eventKey:"0",children:"Bank transfer"})}),Object(p.jsx)(_.a.Collapse,{eventKey:"0",children:Object(p.jsx)(D.a.Body,{children:Object(p.jsx)("table",{children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"BSB:"}),Object(p.jsx)("td",{children:"0123 4567"})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"Account Number:"}),Object(p.jsx)("td",{children:"0123 4567 8901"})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"Reference:"}),Object(p.jsx)("td",{id:"referenceID",children:"0123 4567 8901"})]})]})})})})]}),Object(p.jsxs)(D.a,{children:[Object(p.jsx)(D.a.Header,{children:Object(p.jsx)(_.a.Toggle,{as:E.a,variant:"link",eventKey:"1",children:"Credit Card Payment"})}),Object(p.jsx)(_.a.Collapse,{eventKey:"1",children:Object(p.jsx)(D.a.Body,{children:Object(p.jsxs)(k.a,{onSubmit:function(){console.log("makeing card donaiton")},children:[Object(p.jsxs)(k.a.Group,{controlId:"formBasicCardNumber",children:[Object(p.jsx)(k.a.Label,{children:"Card Number"}),Object(p.jsx)(k.a.Control,{required:!0,value:n,onChange:function(e){return r(e.target.value)},type:"text",placeholder:"Enter Card Number"})]}),Object(p.jsxs)(k.a.Group,{controlId:"formBasicName",children:[Object(p.jsx)(k.a.Label,{children:"Name on card"}),Object(p.jsx)(k.a.Control,{required:!0,value:o,onChange:function(e){return i(e.target.value)},type:"text",placeholder:"Name on card"})]}),Object(p.jsx)(E.a,{variant:"primary",type:"submit",children:"Submit"})]})})})]})]})})]}),Object(p.jsx)("br",{})]})},H=function(){var e=Object(a.useState)(0),t=Object(m.a)(e,2),n=t[0],r=t[1],s=Object(d.f)();function c(){return(c=Object(l.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.getElementsByClassName("spinner")[0].style.display="block",r(1),e.next=4,v.getFood();case 4:if(t=e.sent,n="",!(t.length>0)){e.next=14;break}for(n+="<table class='productList'><tbody>",a=0;a<t.length;a++)a%4===0&&(n+=0===a?"<tr>":"</tr><tr>"),n+="\n                <td>\n                    <div class='card'>                    \n                        <h5 class='desc'>"+t[a].desc+" - $"+t[a].price+'</h5>\n                        <img card-img-top src="'+t[a].src+"\"></img>\n                        <br>\n                        <button class='addToCartBtn btn btn-primary btn-sm' value=\""+t[a].desc+'">Donate item</button>\n                    </div>\n                </td>\n                ';return n+="</tr></tbody></table>",document.getElementById("foodItems").innerHTML=n,document.getElementsByClassName("spinner")[0].style.display="none",e.next=14,o();case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return u.apply(this,arguments)}function u(){return(u=Object(l.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=document.getElementsByClassName("addToCartBtn"),n=function(e){t[e].onclick=Object(l.a)(i.a.mark((function n(){var a;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=sessionStorage.getItem("myCart"),a+=","+t[e].value,console.log(a),sessionStorage.setItem("myCart",a),b("alert alert-success","Added item <strong>"+t[e].value+"</strong> to donation cart");case 5:case"end":return n.stop()}}),n)})))},a=0;a<t.length;a++)n(a);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t){var n=document.getElementById("alertNotification").innerHTML,a=document.getElementsByClassName("notificationBadge").length;n+='\n        <div class="notificationBadge">\n            <div class="'+e+'" role="alert">\n                '+t+"\n            </div>\n        </div>                \n        ",document.getElementById("alertNotification").innerHTML=n,setTimeout((function(){document.getElementsByClassName("notificationBadge")[a]&&(document.getElementsByClassName("notificationBadge")[a].style.display="none")}),4e3)}return Object(a.useEffect)((function(){if(0===n){var e=sessionStorage.getItem("savedEmail");e?(console.log("savedmail is "+e),function(){c.apply(this,arguments)}()):s.push("/")}})),Object(p.jsxs)("div",{className:"DonateFood",children:[Object(p.jsxs)("div",{className:"content",children:[Object(p.jsx)("br",{}),Object(p.jsx)("div",{id:"alertNotification"}),Object(p.jsx)("br",{}),Object(p.jsx)("h3",{children:"Donate Food and Other Items"}),Object(p.jsx)("br",{}),Object(p.jsx)("p",{children:"Thank you for your generosity. Please select which items you wish to purchase and donate:"}),Object(p.jsxs)("p",{children:["You can alter this list in ",Object(p.jsx)("a",{href:"#my-cart",children:"My Cart"})," on the next page"]}),Object(p.jsx)("br",{}),Object(p.jsx)("hr",{}),Object(p.jsx)("h4",{children:"Food"}),Object(p.jsx)(C.a,{animation:"border",className:"spinner"}),Object(p.jsx)("div",{id:"foodItems"}),Object(p.jsx)("br",{}),Object(p.jsx)("br",{}),Object(p.jsx)("hr",{}),Object(p.jsx)("button",{type:"button",className:"btn btn-success",onClick:function(){s.push("/my-cart")},children:"Confirm donation items"})]}),Object(p.jsx)("br",{}),Object(p.jsx)("br",{})]})},G=function(){return Object(a.useEffect)((function(){var e=sessionStorage.getItem("savedEmail");e?(console.log("savedmail is "+e),document.getElementsByClassName("Footerbottom")[0].style.display="block"):document.getElementsByClassName("Footerbottom")[0].style.display="none"})),Object(p.jsxs)("div",{className:"Footerbottom",children:[Object(p.jsx)("br",{}),Object(p.jsx)("br",{}),Object(p.jsx)("footer",{className:"bg-light text-center text-lg-start",children:Object(p.jsx)("div",{className:"text-center p-3",style:{backgroundColor:"rgba(0, 0, 0, 0.2)"},children:Object(p.jsx)("p",{className:"text-dark",children:"Donating money and food to the poor. v1.1"})})})]})},R=function(){var e=Object(a.useState)(0),t=Object(m.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),c=Object(m.a)(s,2),o=c[0],u=c[1],b=Object(a.useState)(""),j=Object(m.a)(b,2),h=j[0],f=j[1],y=Object(d.f)();function g(e){return x.apply(this,arguments)}function x(){return(x=Object(l.a)(i.a.mark((function e(t){var n,a,s,c,o,l,d,u,b,p,j,m,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("over here"),r(1),n=[],a="",!t){e.next=25;break}if(1===(s=t.split(",")).length&&"null"===s[0]){e.next=22;break}return a='<table class="table"><tbody><tr><th scope="col">Item</th><th scope="col">Qty</th><th scope="col">Total</th><th></th></tr>',console.log(s),e.next=11,v.getFood();case 11:for(c=e.sent,o=0,console.log(c),l=0;l<s.length;l++)for(d=0;d<c.length;d++)if(s[l]===c[d].desc){for(u=!0,b=0;b<n.length;b++)n[b].desc===s[l]&&(p={desc:n[b].desc,qty:n[b].qty+1,total:parseFloat(n[b].total)+parseFloat(c[d].price)},n[b]=p,b=n.length,u=!1);!0===u&&(j={desc:s[l],qty:1,total:parseFloat(c[d].price)},n.push(j)),d=c.length}for(m="Remove item",/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(m="X"),h=0;h<n.length;h++)a+="<tr><td>"+n[h].desc+'</td><td><button type="button" class="addToOrder btn btn-light" value="'+n[h].desc+'">+</button>'+n[h].qty+'<button type="button" class="removeFromOrder btn btn-light" value="'+n[h].desc+'">-</button></td><td>$'+n[h].total+"</td><td><button class='removeItemBtn btn btn-danger btn-sm' value=\""+n[h].desc+'">'+m+"</button></td></tr>",o+=parseFloat(n[h].total);a+="<tr><td><b>Total</b></td><td></td><td><b>$"+o+"</b></td><td></td></tr>",a+="</tbody></table>",e.next=23;break;case 22:a="<p>You haven't selected any items to be donated. Please <a href='#donate-food'>Click here</a> to select items to donate</p>";case 23:e.next=26;break;case 25:a="<p>You haven't selected any items to be donated. Please <a href='#donate-food'>Click here</a> to select items to donate</p>";case 26:return document.getElementById("myItems").innerHTML=a,console.log("myCart:"+t),e.next=30,O();case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return S.apply(this,arguments)}function S(){return(S=Object(l.a)(i.a.mark((function e(){var t,n,a,r,s,c,o,d,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=document.getElementsByClassName("removeItemBtn"),n=function(e){t[e].onclick=Object(l.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:w(t[e].value);case 1:case"end":return n.stop()}}),n)})))},a=0;a<t.length;a++)n(a);for(r=document.getElementsByClassName("addToOrder"),s=function(e){r[e].onclick=Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:N(r[e].value);case 1:case"end":return t.stop()}}),t)})))},c=0;c<r.length;c++)s(c);for(o=document.getElementsByClassName("removeFromOrder"),d=function(e){o[e].onclick=Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:C(o[e].value);case 1:case"end":return t.stop()}}),t)})))},u=0;u<o.length;u++)d(u);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){var t=sessionStorage.getItem("myCart");t=t.split(",");for(var n=0;n<t.length;n++)t[n]===e&&(t.splice(n,1),n=t.length);t=t.toString(),sessionStorage.setItem("myCart",t),g(t)}function N(e){var t=sessionStorage.getItem("myCart");t+=","+e,sessionStorage.setItem("myCart",t),g(t)}function w(e){console.log("item was "+e);var t=sessionStorage.getItem("myCart");t=t.split(",");for(var n=0;n<t.length;n++)t[n]===e&&(t.splice(n,1),n=0);t=t.toString(),sessionStorage.setItem("myCart",t),g(t)}function B(){return(B=Object(l.a)(i.a.mark((function e(){var t,n,a,r,s,c,o,l,d,u,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=sessionStorage.getItem("savedEmail"),n=sessionStorage.getItem("myCart"),a=sessionStorage.getItem("orderDetails"),r=JSON.parse(a),s=n.split(","),e.next=7,v.getFood();case 7:for(c=e.sent,o=0,l=0;l<s.length;l++)for(d=0;d<c.length;d++)s[l]===c[d].desc&&(o+=c[d].price,d=c.length);if(u=1,o<=0&&(u=0,I("error","Your order is invalid")),r&&""!==r.name&&""!==r.address||(u=0,I("alert-danger","Your recipient cannot be left blank")),1!==u){e.next=18;break}return e.next=16,v.createOrder(t,n,o,a);case 16:b=e.sent,y.push("/confirmation?receipt="+b+"#");case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){var n=document.getElementById("alertNotification").innerHTML,a=document.getElementsByClassName("notificationBadge").length;n+='\n        <div class="notificationBadge">\n            <div class="'+e+'" role="alert">\n                '+t+"\n            </div>\n        </div>                \n        ",document.getElementById("alertNotification").innerHTML=n,setTimeout((function(){document.getElementsByClassName("notificationBadge")[a]&&(document.getElementsByClassName("notificationBadge")[a].style.display="none")}),4e3)}return Object(a.useEffect)((function(){if(0===n){var e=sessionStorage.getItem("savedEmail"),t=sessionStorage.getItem("myCart");e?(console.log("savedmail is "+e),g(t)):y.push("/")}})),Object(p.jsx)("div",{className:"MyCart",children:Object(p.jsxs)("div",{className:"content",children:[Object(p.jsx)("br",{}),Object(p.jsx)("div",{id:"alertNotification"}),Object(p.jsx)("br",{}),Object(p.jsx)("h3",{children:"My Cart"}),Object(p.jsx)("br",{}),Object(p.jsx)("div",{id:"myItems"}),Object(p.jsx)("br",{}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){y.push("/donate-food")},children:"Make more donations"}),Object(p.jsx)("br",{}),Object(p.jsx)("hr",{}),Object(p.jsx)("h4",{children:"Delivery details"}),Object(p.jsx)("p",{children:"Please enter the name and address you wish these items to be donated to"}),Object(p.jsx)("div",{className:"recipient",children:Object(p.jsxs)(k.a,{onSubmit:function(e){e.preventDefault();var t={name:o,address:h};sessionStorage.setItem("orderDetails",JSON.stringify(t)),function(){B.apply(this,arguments)}()},autoComplete:"off",children:[Object(p.jsxs)(k.a.Group,{controlId:"formName",children:[Object(p.jsx)(k.a.Label,{children:"Name of recipient (the person or people receiving the item)"}),Object(p.jsx)(k.a.Control,{required:!0,value:o,onChange:function(e){return u(e.target.value)},type:"text",placeholder:"Name"})]}),Object(p.jsxs)(k.a.Group,{controlId:"formAddress",children:[Object(p.jsx)(k.a.Label,{children:"Address"}),Object(p.jsx)(k.a.Control,{required:!0,value:h,onChange:function(e){return f(e.target.value)},type:"text",placeholder:"Address"})]}),Object(p.jsx)(E.a,{variant:"success",type:"submit",children:"Proceed with payment options"})]})}),Object(p.jsx)("br",{})]})})},Y=function(){var e=Object(a.useState)(0),t=Object(m.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),c=Object(m.a)(s,2),o=c[0],u=c[1],b=Object(a.useState)(""),j=Object(m.a)(b,2),h=j[0],f=j[1],y=Object(a.useState)(""),g=Object(m.a)(y,2),O=g[0],S=g[1],N=Object(a.useState)(""),w=Object(m.a)(N,2),B=w[0],I=w[1],A=Object(d.f)();function T(){return(T=Object(l.a)(i.a.mark((function e(){var t,n,a,r,s,c,o,l,d,u,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.getPendingOrders();case 2:t=e.sent,n="",a=0;case 5:if(!(a<t.length)){e.next=18;break}for(r=t[a].items.split(","),s=[],c="",o=0;o<r.length;o++)if(!s.includes(r[o])&&"undefined"!==r[o]&&"null"!==r[o]){for(s.push(r[o]),l=1,d=o+1;d<r.length;d++)r[o]===r[d]&&(l+=1);c+="\n                            <p>"+r[o]+" x "+l+"\n                        "}return u=JSON.parse(t[a].details),e.next=13,v.getUserDetails(t[a].user);case 13:b=e.sent,n+='\n                <div class="order">\n                    <p><b>User: </b>'+b+"</p>\n                    <p><b>Total: $</b>"+t[a].total+"</p>\n                    <p><b>Items: </b></p>\n                    "+c+"\n                    <p><b>Delivery Recepient: </b>"+u.name+"</p>\n                    <p><b>Delivery Recepient Address: </b>"+u.address+"</p>\n                    <p><b>Receipt: </b>"+t[a].receipt+"</p>\n                    <button class='completed btn btn-primary' value='"+t[a].receipt+"'>Set order as completed</button>\n                </div>\n            ";case 15:a++,e.next=5;break;case 18:return document.getElementsByClassName("pendingOrders")[0].style.display="block",document.getElementsByClassName("pendingOrders")[0].innerHTML=n,e.next=22,D();case 22:console.log("done with pending orders");case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return L.apply(this,arguments)}function L(){return(L=Object(l.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=document.getElementsByClassName("completed"),n=function(e){t[e].onclick=Object(l.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.validateOrder(t[e].value);case 2:case"end":return n.stop()}}),n)})))},a=0;a<t.length;a++)n(a);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(l.a)(i.a.mark((function e(){var t,n,a,r,s,c,o,l,d,u,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.getConfirmedOrders();case 2:t=e.sent,n="",a=0;case 5:if(!(a<t.length)){e.next=18;break}for(r=t[a].items.split(","),s=[],c="",o=0;o<r.length;o++)if(!s.includes(r[o])&&"undefined"!==r[o]&&"null"!==r[o]){for(s.push(r[o]),l=1,d=o+1;d<r.length;d++)r[o]===r[d]&&(l+=1);c+="\n                            <p>"+r[o]+" x "+l+"\n                        "}return u=JSON.parse(t[a].details),e.next=13,v.getUserDetails(t[a].user);case 13:b=e.sent,n+='\n                <div class="order">\n                    <p><b>User: </b>'+b+"</p>\n                    <p><b>Total: $</b>"+t[a].total+"</p>\n                    <p><b>Items: </b></p>\n                    "+c+"\n                    <p><b>Delivery Recepient: </b>"+u.name+"</p>\n                    <p><b>Delivery Recepient Address: </b>"+u.address+"</p>\n                    <p><b>Receipt: </b>"+t[a].receipt+"</p>\n                </div>\n            ";case 15:a++,e.next=5;break;case 18:document.getElementsByClassName("completedOrders")[0].style.display="block",document.getElementsByClassName("completedOrders")[0].innerHTML=n,console.log("done with confirmed orders");case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(l.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.getElementsByClassName("spinner")[0].style.display="block",r(1),e.next=4,v.getFood();case 4:if(t=e.sent,n="",!(t.length>0)){e.next=14;break}for(n+="<table class='productList'><tbody>",a=0;a<t.length;a++)a%4===0&&(n+=0===a?"<tr>":"</tr><tr>"),n+="\n                <td>\n                    <div class='card'>                    \n                        <h5 class='desc'>"+t[a].desc+" - $"+t[a].price+'</h5>\n                        <img card-img-top src="'+t[a].src+"\"></img>\n                        <br>\n                        <button class='removeItem btn btn-danger btn-sm' value=\""+t[a].desc+'">Remove item</button>\n                    </div>\n                </td>\n                ';return n+="</tr></tbody></table>",document.getElementById("foodItems").innerHTML=n,document.getElementsByClassName("spinner")[0].style.display="none",e.next=14,P();case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return M.apply(this,arguments)}function M(){return(M=Object(l.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=document.getElementsByClassName("removeItem"),n=function(e){t[e].onclick=Object(l.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.removeItem(t[e].value);case 2:q("alert alert-warning","Removed item <strong>"+t[e].value+"</strong> from database. Please refresh the page to see effect.");case 3:case"end":return n.stop()}}),n)})))},a=0;a<t.length;a++)n(a);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(l.a)(i.a.mark((function e(t){var n,a,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,v.getFood();case 3:for(n=e.sent,a=!0,r=0;r<n.length;r++)n[r].desc===o&&(q("alert alert-warning",'"'+o+'" is already in the database. Please remove it if you want to proceed'),a=!1);if(!0!==a){e.next=14;break}return s=O.replace("$",""),e.next=10,v.addItem(o,h,s);case 10:q("alert alert-success",'"'+o+'" has been added to the database'),u(""),S(""),f("");case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){var n=document.getElementById("alertNotification").innerHTML,a=document.getElementsByClassName("notificationBadge").length;n+='\n        <div class="notificationBadge">\n            <div class="'+e+'" role="alert">\n                '+t+"\n            </div>\n        </div>                \n        ",document.getElementById("alertNotification").innerHTML=n,setTimeout((function(){document.getElementsByClassName("notificationBadge")[a]&&(document.getElementsByClassName("notificationBadge")[a].style.display="none")}),4e3)}function H(){return(H=Object(l.a)(i.a.mark((function e(t){var n,a,r,s,c,o,l,d,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,v.getOrderById(B);case 3:if(0===(n=e.sent)){e.next=18;break}for(a=n.items.split(","),console.log(n),r=[],s="",c=0;c<a.length;c++)if(!r.includes(a[c])&&"undefined"!==a[c]&&"null"!==a[c]){for(r.push(a[c]),o=1,l=c+1;l<a.length;l++)a[c]===a[l]&&(o+=1);s+="\n                            <p>"+a[c]+" x "+o+"\n                        "}return d=JSON.parse(n.details),e.next=13,v.getUserDetails(n.user);case 13:u=e.sent,document.getElementById("filteredOrder").style.display="block",document.getElementById("filteredOrder").innerHTML="\n                <p><b>User: </b>"+u+"</p>\n                <p><b>Total: </b>"+n.total+"</p>\n                <p><b>Items: </b></p>\n                "+s+"\n                <p><b>Delivery Recepient: </b>"+d.name+"</p>\n                <p><b>Delivery Recepient Address: </b>"+d.address+"</p>\n                <p><b>Status: </b>"+n.confirmed+"</p>\n            ",e.next=19;break;case 18:document.getElementById("filteredOrder").innerHTML=B+" is an invalid receipt";case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.writeToken();case 2:t=e.sent,n="https://harvey67.github.io/care/#/token="+t+"#",document.getElementById("invitationLinkID").innerHTML="<p><a href='"+n+"'>"+n+"</a> - send this link to the person who want to see the site. This link can only be used once and is unique for that person only.</p>";case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){if(0===n){var e=sessionStorage.getItem("savedEmail");e?(console.log("savedmail is "+e),document.getElementsByClassName("content")[0].style.display="none",function(){var e=prompt("Admin Password");console.log("pass is ");var t=x.a.AES.encrypt(e,"passEncrypted").toString();if(console.log(x.a.AES.decrypt(t,"passEncrypted").toString()),"61646d696e"===x.a.AES.decrypt(t,"passEncrypted").toString())return!0;return!1}()?(document.getElementsByClassName("content")[0].style.display="block",function(){U.apply(this,arguments)}(),function(){T.apply(this,arguments)}(),function(){F.apply(this,arguments)}()):A.push("/")):A.push("/")}})),Object(p.jsx)("div",{className:"Admin",children:Object(p.jsxs)("div",{className:"content",style:{display:"none"},children:[Object(p.jsx)("br",{}),Object(p.jsx)("div",{id:"alertNotification"}),Object(p.jsx)("br",{}),Object(p.jsx)("h3",{children:"Admin page"}),Object(p.jsx)("br",{}),Object(p.jsx)("h5",{children:"Link to invite people to site"}),Object(p.jsx)("br",{}),Object(p.jsx)(E.a,{variant:"success",onClick:function(){return G.apply(this,arguments)},children:"Get invitation link"}),Object(p.jsx)("br",{}),Object(p.jsx)("div",{id:"invitationLinkID"}),Object(p.jsx)("br",{}),Object(p.jsxs)("div",{style:{display:"block"},children:[Object(p.jsx)("hr",{}),Object(p.jsx)("h5",{children:"Add food items to database"}),Object(p.jsx)("br",{}),Object(p.jsxs)(k.a,{onSubmit:function(e){return _.apply(this,arguments)},autoComplete:"off",children:[Object(p.jsxs)(k.a.Group,{controlId:"formDesc",children:[Object(p.jsx)(k.a.Label,{children:"Description"}),Object(p.jsx)(k.a.Control,{required:!0,value:o,onChange:function(e){return u(e.target.value)},type:"text",placeholder:"Description"})]}),Object(p.jsxs)(k.a.Group,{controlId:"formSrc",children:[Object(p.jsx)(k.a.Label,{children:"Image link"}),Object(p.jsx)(k.a.Control,{required:!0,value:h,onChange:function(e){return f(e.target.value)},type:"text",placeholder:"Image link"})]}),Object(p.jsxs)(k.a.Group,{controlId:"formPrc",children:[Object(p.jsx)(k.a.Label,{children:"Price"}),Object(p.jsx)(k.a.Control,{required:!0,value:O,onChange:function(e){return S(e.target.value)},type:"text",placeholder:"Price"})]}),Object(p.jsx)(E.a,{variant:"primary",type:"submit",children:"Submit"})]})]}),Object(p.jsx)("br",{}),Object(p.jsx)("br",{}),Object(p.jsx)("hr",{}),Object(p.jsx)("h4",{children:"Food"}),Object(p.jsx)(C.a,{animation:"border",className:"spinner"}),Object(p.jsx)("div",{id:"foodItems"}),Object(p.jsx)("br",{}),Object(p.jsx)("hr",{}),Object(p.jsx)("br",{}),Object(p.jsx)("h3",{children:"Orders"}),Object(p.jsx)("h5",{children:"Filter Order"}),Object(p.jsx)("div",{className:"orderFilter",children:Object(p.jsxs)(k.a,{className:"form-inline",onSubmit:function(e){return H.apply(this,arguments)},autoComplete:"off",children:[Object(p.jsx)(k.a.Group,{controlId:"formInput",children:Object(p.jsx)(k.a.Control,{required:!0,value:B,onChange:function(e){return I(e.target.value)},type:"text",placeholder:"Receipt Number"})}),Object(p.jsx)(E.a,{variant:"primary",type:"submit",children:"Submit"})]})}),Object(p.jsx)("br",{}),Object(p.jsx)("br",{}),Object(p.jsx)("div",{id:"filteredOrder",style:{display:"none"}}),Object(p.jsx)("br",{}),Object(p.jsx)("h5",{children:"Pending Orders"}),Object(p.jsx)("div",{className:"pendingOrders",style:{display:"none"}}),Object(p.jsx)("br",{}),Object(p.jsx)("h5",{children:"Completed Orders"}),Object(p.jsx)("div",{className:"completedOrders",style:{display:"none"}})]})})},K=function(){var e=Object(a.useState)(0),t=Object(m.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),c=Object(m.a)(s,2),o=c[0],u=c[1],b=Object(a.useState)(""),j=Object(m.a)(b,2),h=j[0],f=j[1],y=Object(d.f)();function g(){return(g=Object(l.a)(i.a.mark((function e(){var t,n,a,s,c,o,l,d,u,b,p,j,m,h,f,y,g;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r(1),t="",n=[],!(a=sessionStorage.getItem("myCart"))){e.next=27;break}if(1===(s=a.split(",")).length&&"null"===s[0]){e.next=24;break}return t='<table class="table"><tbody><tr><th scope="col">Item</th><th scope="col">Qty</th><th scope="col">Total</th></tr>',console.log(s),e.next=11,v.getFood();case 11:for(c=e.sent,o=0,l=0;l<s.length;l++)for(d=0;d<c.length;d++)if(s[l]===c[d].desc){for(u=!0,b=0;b<n.length;b++)n[b].desc===s[l]&&(p={desc:n[b].desc,qty:n[b].qty+1,total:parseFloat(n[b].total)+parseFloat(c[d].price)},n[b]=p,b=n.length,u=!1);!0===u&&(j={desc:s[l],qty:1,total:parseFloat(c[d].price)},n.push(j)),d=c.length}for(m=0;m<n.length;m++)t+="<tr><td>"+n[m].desc+"</td><td>"+n[m].qty+"</td><td>$"+n[m].total+"</td></tr>",o+=parseFloat(n[m].total);t+="<tr><td><b>Total</b></td><td></td><td><b>$"+o+"</b></td></tr>",t+="</tbody></table>",(h=window.location.href).includes("receipt=")&&h.includes("#")&&(f=h.split("receipt=")[1].split("#"),document.getElementById("receiptID").innerHTML="Your receipt number is <b>"+f+"</b>. Please include this in your reference number during payment."),y=sessionStorage.getItem("orderDetails"),g=JSON.parse(y),document.getElementById("deliveryDetails").innerHTML="\n                <h3>Delivery Details</h3>\n                <p>You can edit this <a href='#my-cart'>here</a></p>\n                <table><tbody>\n                <tr><th>Name:</th><td>"+g.name+"</td></tr>\n                <tr><th>Address:</th><td>"+g.address+"</td></tr>\n                </tbody></table>\n                ",e.next=25;break;case 24:t="<p>You haven't selected any items to be donated. Please <a href='#donate-food'>Click here</a> to select items to donate</p>";case 25:e.next=28;break;case 27:t="<p>You haven't selected any items to be donated. Please <a href='#donate-food'>Click here</a> to select items to donate</p>";case 28:document.getElementsByClassName("spinner")[0].style.display="none",document.getElementById("myItems").innerHTML=t;case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){if(0===n){var e=sessionStorage.getItem("savedEmail");e?(console.log("savedmail is "+e),function(){g.apply(this,arguments)}()):y.push("/")}})),Object(p.jsxs)("div",{className:"Confirmation",children:[Object(p.jsxs)("div",{className:"content",children:[Object(p.jsx)("br",{}),Object(p.jsx)("div",{id:"alertNotification"}),Object(p.jsx)("br",{}),Object(p.jsx)("h3",{children:"Confirm donation"}),Object(p.jsx)("br",{}),Object(p.jsx)("p",{children:"Thank you for your generosity. Please enter the payment details below:"}),Object(p.jsx)("br",{}),Object(p.jsx)("h4",{children:"Your receipt:"}),Object(p.jsx)("div",{id:"receiptID"}),Object(p.jsx)("br",{}),Object(p.jsx)("a",{href:"my-cart",children:"Alter order"}),Object(p.jsx)("br",{}),Object(p.jsx)("br",{}),Object(p.jsx)("br",{}),Object(p.jsx)(C.a,{animation:"border",className:"spinner"}),Object(p.jsx)("div",{id:"myItems"}),Object(p.jsx)("br",{}),Object(p.jsx)("br",{}),Object(p.jsx)("hr",{}),Object(p.jsx)("div",{id:"deliveryDetails"}),Object(p.jsx)("br",{}),Object(p.jsx)("hr",{}),Object(p.jsx)("div",{className:"paymentSection",children:Object(p.jsxs)(_.a,{defaultActiveKey:"0",children:[Object(p.jsxs)(D.a,{children:[Object(p.jsx)(D.a.Header,{children:Object(p.jsx)(_.a.Toggle,{as:E.a,variant:"link",eventKey:"0",children:"Bank transfer"})}),Object(p.jsx)(_.a.Collapse,{eventKey:"0",children:Object(p.jsx)(D.a.Body,{children:Object(p.jsx)("table",{children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"BSB:"}),Object(p.jsx)("td",{children:"0123 4567"})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"Account Number:"}),Object(p.jsx)("td",{children:"0123 4567 8901"})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"Reference:"}),Object(p.jsx)("td",{id:"referenceID",children:"0123 4567 8901"})]})]})})})})]}),Object(p.jsxs)(D.a,{children:[Object(p.jsx)(D.a.Header,{children:Object(p.jsx)(_.a.Toggle,{as:E.a,variant:"link",eventKey:"1",children:"Credit Card Payment"})}),Object(p.jsx)(_.a.Collapse,{eventKey:"1",children:Object(p.jsx)(D.a.Body,{children:Object(p.jsxs)(k.a,{onSubmit:function(){console.log("making card donaiton")},children:[Object(p.jsxs)(k.a.Group,{controlId:"formBasicCardNumber",children:[Object(p.jsx)(k.a.Label,{children:"Card Number"}),Object(p.jsx)(k.a.Control,{required:!0,value:o,onChange:function(e){return u(e.target.value)},type:"text",placeholder:"Enter Card Number"})]}),Object(p.jsxs)(k.a.Group,{controlId:"formBasicName",children:[Object(p.jsx)(k.a.Label,{children:"Name on card"}),Object(p.jsx)(k.a.Control,{required:!0,value:h,onChange:function(e){return f(e.target.value)},type:"text",placeholder:"Name on card"})]}),Object(p.jsx)(k.a.Group,{controlId:"formBasicCheckbox",children:Object(p.jsx)(k.a.Check,{type:"checkbox",label:"Remember my login details"})}),Object(p.jsx)(E.a,{variant:"primary",type:"submit",children:"Submit"})]})})})]})]})})]}),Object(p.jsx)("br",{}),Object(p.jsx)("br",{})]})},J=function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("starting up"),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(t="Mobile",document.getElementsByClassName("App")[0].className=t):t="Computer",console.log(t),(n=sessionStorage.getItem("savedEmail"))?(console.log("savedmail is "+n),document.getElementsByClassName("Navbartop")[0].style.display="block",document.getElementsByClassName("Footerbottom")[0].style.display="block"):(document.getElementsByClassName("Navbartop")[0].style.display="none",document.getElementsByClassName("Footerbottom")[0].style.display="none");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){console.log(window.location.href),function(){e.apply(this,arguments)}()})),Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(j,{}),Object(p.jsxs)(d.c,{children:[Object(p.jsx)(d.a,{path:"/",component:N,exact:!0}),Object(p.jsx)(d.a,{path:"/home",component:P}),Object(p.jsx)(d.a,{path:"/donate-money",component:q}),Object(p.jsx)(d.a,{path:"/donate-food",component:H}),Object(p.jsx)(d.a,{path:"/my-cart",component:R}),Object(p.jsx)(d.a,{path:"/admin",component:Y}),Object(p.jsx)(d.a,{path:"/confirmation",component:K}),Object(p.jsx)(d.a,{component:M})]}),Object(p.jsx)(G,{})]})},$=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,312)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))},Q=n(40);c.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(Q.a,{children:Object(p.jsx)(J,{})})}),document.getElementById("root")),$()}},[[309,1,2]]]);
//# sourceMappingURL=main.412ef0fa.chunk.js.map